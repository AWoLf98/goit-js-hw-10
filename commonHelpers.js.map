{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst start = document.querySelector('button[data-start]');\n\n//disabled потрібно згідно ТЗ тільки кнопку.\nclass Timer {\n  #idInteval;\n  #timeLeft;\n  #userSelectedDate;\n  #UPDATE_TIMER_INTERVAL;\n  #start;\n\n  constructor(\n    userSelectedDate = new Date(),\n    startQuerySelector = document.querySelector('button[data-start]'),\n    selector = 'input#datetime-picker',\n    UPDATE_TIMER_INTERVAL = 1000\n  ) {\n    this.#idInteval = null;\n    this.#timeLeft = 0;\n    this.#userSelectedDate = userSelectedDate;\n    this.#start = startQuerySelector;\n    this.#UPDATE_TIMER_INTERVAL = UPDATE_TIMER_INTERVAL;\n    this.#disabledInput();\n\n    const options = {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: selectedDates => {\n        this.#userSelectedDate = selectedDates[0];\n        this.#toggleButtonState();\n      },\n    };\n\n    const datetime_flatpickr = flatpickr(selector, options);\n  }\n\n  startTimer() {\n    this.#disabledInput();\n\n    this.#timeLeft = Date.parse(this.#userSelectedDate) - Date.now();\n\n    if (this.#idInteval) {\n      clearInterval(this.#idInteval);\n    }\n\n    this.#idInteval = setInterval(\n      this.#updateTimer.bind(this),\n      this.#UPDATE_TIMER_INTERVAL\n    );\n  }\n\n  #updateTimer() {\n    this.#timeLeft -= this.#UPDATE_TIMER_INTERVAL;\n\n    if (this.#timeLeft <= 0) {\n      clearInterval(this.#idInteval);\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = Timer.#convertMs(this.#timeLeft);\n    const data_seconds = document.querySelector('span[data-seconds]');\n    const data_minutes = document.querySelector('span[data-minutes]');\n    const data_hours = document.querySelector('span[data-hours]');\n    const data_days = document.querySelector('span[data-days]');\n\n    if (data_seconds || data_minutes || data_hours || data_days) {\n      data_seconds.textContent = Timer.#addLeadingZero(seconds);\n      data_minutes.textContent = Timer.#addLeadingZero(minutes);\n      data_hours.textContent = Timer.#addLeadingZero(hours);\n      data_days.textContent = Timer.#addLeadingZero(days);\n    } else {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Error interface',\n      });\n    }\n  }\n\n  #disabledInput() {\n    this.#start.setAttribute('disabled', 'disabled');\n  }\n\n  #toggleButtonState() {\n    if (Date.parse(this.#userSelectedDate) >= Date.now()) {\n      this.#start.removeAttribute('disabled');\n    } else {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Please choose a date in the future',\n      });\n      this.#disabledInput();\n    }\n  }\n\n  static #convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  static #addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n  }\n}\n\nconst bestTimer = new Timer();\n\nstart.addEventListener('click', bestTimer.startTimer.bind(bestTimer));\n"],"names":["start","_Timer","userSelectedDate","startQuerySelector","selector","UPDATE_TIMER_INTERVAL","__privateAdd","_updateTimer","_disabledInput","_toggleButtonState","_idInteval","_timeLeft","_userSelectedDate","_UPDATE_TIMER_INTERVAL","_start","__privateSet","__privateMethod","disabledInput_fn","flatpickr","selectedDates","toggleButtonState_fn","__privateGet","updateTimer_fn","days","hours","minutes","seconds","_a","_convertMs","convertMs_fn","data_seconds","data_minutes","data_hours","data_days","_b","_addLeadingZero","addLeadingZero_fn","_c","_d","_e","iziToast","ms","value","Timer","bestTimer"],"mappings":"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"}