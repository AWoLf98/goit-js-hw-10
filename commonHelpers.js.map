{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst datetime_pickr = document.querySelector('input#datetime-picker');\nconst start = document.querySelector('button[data-start]');\n\n//disabled потрібно згідно ТЗ тільки кнопку.\nclass Timer {\n  #userSelectedDate;\n  #idInteval;\n  #timeLeft;\n  #UPDATE_TIMER_INTERVAL;\n  #start;\n\n  constructor(\n    userSelectedDate = new Date(),\n    selector = 'input#datetime-picker',\n    startQuerySelector = document.querySelector('button[data-start]'),\n    UPDATE_TIMER_INTERVAL = 1000\n  ) {\n    this.#idInteval = null;\n    this.#timeLeft = 0;\n    this.#userSelectedDate = userSelectedDate;\n    this.#UPDATE_TIMER_INTERVAL = UPDATE_TIMER_INTERVAL;\n    this.#start = startQuerySelector;\n    this.disabledInput();\n\n    const options = {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: selectedDates => {\n        this.#userSelectedDate = selectedDates[0];\n      },\n    };\n\n    const datetime_flatpickr = flatpickr(selector, options);\n  }\n\n  startTimer() {\n    this.disabledInput();\n\n    this.#timeLeft = Date.parse(this.#userSelectedDate) - Date.now();\n\n    if (this.#timeLeft < 0) {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Please choose a date in the future',\n      });\n      return;\n    }\n\n    if (this.#idInteval) {\n      clearInterval(this.#idInteval);\n    }\n\n    this.#idInteval = setInterval(\n      this.#updateTimer.bind(this),\n      this.#UPDATE_TIMER_INTERVAL\n    );\n  }\n\n  #updateTimer() {\n    this.#timeLeft -= this.#UPDATE_TIMER_INTERVAL;\n\n    if (this.#timeLeft <= 0) {\n      clearInterval(this.#idInteval);\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = Timer.#convertMs(this.#timeLeft);\n    const data_seconds = document.querySelector('span[data-seconds]');\n    const data_minutes = document.querySelector('span[data-minutes]');\n    const data_hours = document.querySelector('span[data-hours]');\n    const data_days = document.querySelector('span[data-days]');\n\n    if (data_seconds || data_minutes || data_hours || data_days) {\n      data_seconds.textContent = Timer.#addLeadingZero(seconds);\n      data_minutes.textContent = Timer.#addLeadingZero(minutes);\n      data_hours.textContent = Timer.#addLeadingZero(hours);\n      data_days.textContent = Timer.#addLeadingZero(days);\n    } else {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Error interface',\n      });\n    }\n  }\n\n  disabledInput() {\n    this.#start.setAttribute('disabled', 'disabled');\n  }\n\n  undisabledInput() {\n    \n    if (Date.parse(this.#userSelectedDate) - Date.now() < 0) {\n      this.#start.removeAttribute('disabled');\n    }\n    else {\n      this.disabledInput();\n    }\n  }\n\n  static #convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  static #addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n  }\n}\n\nconst bestTimer = new Timer();\n\nstart.addEventListener('click', bestTimer.startTimer.bind(bestTimer));\ndatetime_pickr.addEventListener('input', bestTimer.undisabledInput.bind(bestTimer));\n"],"names":["datetime_pickr","start","_Timer","userSelectedDate","selector","startQuerySelector","UPDATE_TIMER_INTERVAL","__privateAdd","_updateTimer","_userSelectedDate","_idInteval","_timeLeft","_UPDATE_TIMER_INTERVAL","_start","__privateSet","flatpickr","selectedDates","__privateGet","iziToast","__privateMethod","updateTimer_fn","days","hours","minutes","seconds","_a","_convertMs","convertMs_fn","data_seconds","data_minutes","data_hours","data_days","_b","_addLeadingZero","addLeadingZero_fn","_c","_d","_e","ms","value","Timer","bestTimer"],"mappings":"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"}