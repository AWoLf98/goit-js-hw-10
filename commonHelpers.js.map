{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst datetime_pickr = document.querySelector('input#datetime-picker');\nconst start = document.querySelector('button[data-start]');\n\nclass Timer {\n\n  #idInteval;\n  #timeLeft;\n  #userSelectedDate;\n  #UPDATE_TIMER_INTERVAL;\n\n  constructor(userSelectedDate = new Date(), UPDATE_TIMER_INTERVAL = 1000) {\n    this.#idInteval = null;\n    this.#timeLeft = 0;\n    this.#userSelectedDate = userSelectedDate;\n    this.#UPDATE_TIMER_INTERVAL = UPDATE_TIMER_INTERVAL;\n  }\n\n  startTimer() {\n    // JSBI.subtract(JSBI.BigInt(\n    this.#timeLeft = Date.parse(this.#userSelectedDate) - Date.now();\n    console.log(Date.parse(this.#userSelectedDate));\n    if (this.#timeLeft < 0) {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Please choose a date in the future',\n      });\n      return;\n    }\n\n    this.#idInteval = setInterval(this.#updateTimer.bind(this), this.#UPDATE_TIMER_INTERVAL);\n    console.log(this.#idInteval)\n  }\n\n  #updateTimer() {\n    console.log('Start interval');\n    console.log(this.#idInteval);\n    // console.log(clearInterval(this.#idInteval));\n    this.#timeLeft -= this.#UPDATE_TIMER_INTERVAL;\n    if(this.#timeLeft <= 0) {\n      clearInterval(this.#idInteval);\n      return;\n    }\n    console.log(this.#timeLeft);\n    const { days, hours, minutes, seconds } = Timer.#convertMs(this.#timeLeft);\n    console.log(seconds);\n    const data_seconds = document.querySelector('span[data-seconds]');\n    const data_minutes = document.querySelector('span[data-minutes]');\n    const data_hours = document.querySelector('span[data-hours]');\n    const data_days = document.querySelector('span[data-days]');\n    if(data_seconds || data_minutes || data_hours || data_days)\n    {\n      data_seconds.textContent = Timer.#addLeadingZero(seconds);\n      data_minutes.textContent = Timer.#addLeadingZero(minutes);\n      data_hours.textContent = Timer.#addLeadingZero(hours);\n      data_days.textContent = Timer.#addLeadingZero(days);\n    }\n    else {\n      iziToast.show({\n        icon: 'fa-regular fa-circle-xmark',\n        close: false,\n        iconColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        message: 'Error interface',\n      });\n    }\n  }\n\n  static #convertMs(ms) {\n\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  static #addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n  }\n}\n\nlet userSelectedDate = new Date();\nlet bestTimer = new Timer(userSelectedDate);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    // console.log(selectedDates[0]);\n  },\n};\n\nconst datetime_flatpickr = flatpickr('input#datetime-picker', options);\n\ndatetime_pickr.addEventListener('change', () => {\n  // const userSelectedDate = selectedDates[0];\n  if (bestTimer) {\n    clearInterval(bestTimer.idInterval); // Stop the previous timer\n  }\n  bestTimer = new Timer(userSelectedDate);\n});\n\nstart.addEventListener('click', bestTimer.startTimer.bind(bestTimer));\n\n"],"names":["datetime_pickr","start","_Timer","userSelectedDate","UPDATE_TIMER_INTERVAL","__privateAdd","_updateTimer","_idInteval","_timeLeft","_userSelectedDate","_UPDATE_TIMER_INTERVAL","__privateSet","__privateGet","iziToast","__privateMethod","updateTimer_fn","days","hours","minutes","seconds","_a","_convertMs","convertMs_fn","data_seconds","data_minutes","data_hours","data_days","_b","_addLeadingZero","addLeadingZero_fn","_c","_d","_e","ms","value","Timer","bestTimer","options","selectedDates","flatpickr"],"mappings":"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"}